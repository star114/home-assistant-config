iphonedetect_package:
  device_tracker:
    - platform: iphonedetect
      consider_home: 60
      new_device_defaults:
        track_new_devices: true
      hosts:
        HeesikiPhone: !secret HeesikiPhone_ip
        HeesikiPhone11ProMax: !secret HeesikiPhone11ProMax_ip
        HeesikiPadPro: !secret HeesikiPadPro_ip
        SeoJiniPhone: !secret SeoJiniPhone_ip
  input_boolean:
    heesik_out_check:
      name: Heesik out check
      initial: false
    seojin_out_check:
      name: Seojin out check
      initial: false
  automation:
    - alias: "Notify my presence"
      trigger:
        - platform: state
          entity_id: device_tracker.heesikiphone
          from: "not_home"
          to: "home"
          for: "00:05:00"
      condition:
        - condition: state
          entity_id: input_boolean.heesik_out_check
          state: "on"
      action:
        - service: input_boolean.turn_off
          target:
            entity_id: input_boolean.heesik_out_check
        - service: notify.notify_telegram
          data:
            message: "ğŸ¡ í¬ì‹ë‹˜ê»˜ì„œ ì§‘ì— ë„ì°©í•˜ì…¨ìŠµë‹ˆë‹¤."
    - alias: "Notify my absence"
      trigger:
        - platform: state
          entity_id: device_tracker.heesikiphone
          from: "home"
          to: "not_home"
          for: "00:05:00"
      action:
        - service: input_boolean.turn_on
          target:
            entity_id: input_boolean.heesik_out_check
        - service: notify.notify_telegram
          data:
            message: "ğŸ¡ í¬ì‹ë‹˜ê»˜ì„œ ì™¸ì¶œí•˜ì…¨ìŠµë‹ˆë‹¤."
    - alias: "Notify seo's presence"
      trigger:
        - platform: state
          entity_id: device_tracker.seojiniphone
          from: "not_home"
          to: "home"
          for: "00:05:00"
      condition:
        - condition: state
          entity_id: input_boolean.seojin_out_check
          state: "on"
      action:
        - service: input_boolean.turn_off
          target:
            entity_id: input_boolean.seojin_out_check
        - service: notify.notify_telegram
          data:
            message: "ğŸ¡ ì„œì§„ë‹˜ê»˜ì„œ ì§‘ì— ë„ì°©í•˜ì…¨ìŠµë‹ˆë‹¤."
    - alias: "Notify seo's absence"
      trigger:
        - platform: state
          entity_id: device_tracker.seojiniphone
          from: "home"
          to: "not_home"
          for: "00:05:00"
      action:
        - service: input_boolean.turn_on
          target:
            entity_id: input_boolean.seojin_out_check
        - service: notify.notify_telegram
          data:
            message: "ğŸ¡ ì„œì§„ë‹˜ê»˜ì„œ ì™¸ì¶œí•˜ì…¨ìŠµë‹ˆë‹¤."
