tesla_package:
  automation:
    - id: "notify_tesla_update_available"
      alias: Notify tesla update available
      trigger:
        - platform: state
          entity_id: binary_sensor.tesla_update_available
          to: "on"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸ†• ìƒˆë¡œìš´ í…ŒìŠ¬ë¼ ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ ì•Œë¦¼"
            message: "í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ë²„ì „ì€ {{ states('sensor.tesla_version') }} ì…ë‹ˆë‹¤. {{ states('sensor.tesla_update_version') }} ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•˜ì„¸ìš”."

    - id: "notify_tesla_geofence_home"
      alias: Notify tesla geofence home
      trigger:
        - platform: state
          entity_id: sensor.tesla_geofence
          to: "Home"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì§‘ ë„ì°©"
            message: "ë“œë¦¼ì´ì˜ ìœ„ì¹˜ê°€ ì§‘ ê·¼ì²˜ë¡œ í™•ì¸ë©ë‹ˆë‹¤."

    - id: "notify_tesla_geofence_away"
      alias: Notify tesla geofence away
      trigger:
        - platform: state
          entity_id: sensor.tesla_geofence
          from: "Home"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì§‘ ì¶œë°œ"
            message: "ë“œë¦¼ì´ì˜ ìœ„ì¹˜ê°€ ì§‘ì—ì„œ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤."

    - id: "notify_tesla_charge_cable_on"
      alias: Notify tesla charge cable on
      trigger:
        - platform: state
          entity_id: binary_sensor.tesla_plugged_in
          to: "on"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì¶©ì „ ì¼€ì´ë¸” ì•Œë¦¼"
            message: "ì¶©ì „êµ¬ì— ì¼€ì´ë¸”ì´ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤."

    - id: "notify_tesla_charge_cable_off"
      alias: Notify tesla charge cable off
      trigger:
        - platform: state
          entity_id: binary_sensor.tesla_plugged_in
          to: "off"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì¶©ì „ ì¼€ì´ë¸” ì•Œë¦¼"
            message: "ì¶©ì „êµ¬ì— ì¼€ì´ë¸”ì´ ë¶„ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤."

    - id: "notify_tesla_charge_start"
      alias: Notify tesla charge start
      trigger:
        - platform: numeric_state
          entity_id: sensor.tesla_time_to_full_charge
          above: 0.2
      condition:
        - condition: state
          entity_id: binary_sensor.tesla_plugged_in
          state: "on"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì¶©ì „ ì‹œì‘ ì•Œë¦¼"
            message: "ì¶©ì „ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì¶©ì „ í•œë„ëŠ” {{ states('sensor.tesla_charge_limit_soc') }} % ì´ê³  ì™„ë£Œê¹Œì§€ {{ states('sensor.tesla_time_to_full_charge') }} ì‹œê°„ ë‚¨ì•˜ìŠµë‹ˆë‹¤."

    - id: "notify_tesla_charge_end"
      alias: Notify tesla charge end
      trigger:
        - platform: numeric_state
          entity_id: sensor.tesla_time_to_full_charge
          below: 0.1
      condition:
        - condition: state
          entity_id: binary_sensor.tesla_plugged_in
          state: "on"
      action:
        - service: notify.notify_telegram
          data:
            title: "ğŸš˜ ë“œë¦¼ì´ ì¶©ì „ ì¢…ë£Œ ì•Œë¦¼"
            message: "ì¶©ì „ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì¶©ì „ëœ ì–‘ì€ {{ states('sensor.tesla_charge_energy_added') }} kWh ì…ë‹ˆë‹¤."
