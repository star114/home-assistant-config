naver_weather_package:
  automation:
    # too many notifications
    #- id: "notify_rain_forecast"
    #  alias: "notify rain forecast"
    #  trigger:
    #    - platform: state
    #      entity_id: sensor.naver_weather_rainystart_1
    #      from: "비안옴"
    #  action:
    #    - service: notify.notify_telegram
    #      data:
    #        message: "🌂 오늘 비 예보가 있어요."
    - id: "umbrella_notification"
      alias: "umbrella notification"
      trigger:
        - platform: state
          entity_id: binary_sensor.smartthings_door_contact_contact
          to: "on"
      condition:
        - condition: not
          conditions:
            - condition: state
              entity_id: sensor.naver_weather_rainystart_1
              state: "비안옴"
      action:
        - service: notify.notify_telegram
          data:
            message: "🌂 오늘 비 예보가 있으니 우산을 챙기세요."
        - service: notify.in_the_library
          data:
            message: "오늘 비 예보가 있으니 우산을 챙기세요."
    - id: "notify_rain"
      alias: "notify rain"
      trigger:
        - platform: state
          entity_id: weather.naver_weather_1
          to: "rainy"
      condition:
        - condition: state
          entity_id: binary_sensor.smartthings_bedroom_contact_contact
          state: "on"
      action:
        - service: notify.notify_telegram
          data:
            message: "☔️ 지금 비가 내려요. 안방 창문을 닫아주세요."
        - condition: state
          entity_id: alarm_control_panel.home_monitoring
          state: "disarmed"
        - service: notify.galaxy_cloud_speak
          data:
            message: "비가 내려요. 안방 창문을 닫아주세요."
