# bedroom
bedroom_package:
  input_text:
    morning_spotify_playlist_id:
      name: morning spotify playlist id
    morning_ytube_music_playlist_id:
      name: morning youtube music playlist id

  automation:
    - id: "morning_scene_switch_off"
      alias: "morning scene - switch off"
      trigger:
        - platform: state
          entity_id: switch.hej_3gang_bedroom_bed_light_bottom
          from: "on"
          to: "off"
      action:
        - service: scene.turn_on
          entity_id: scene.morning
        - service: alarm_control_panel.alarm_disarm
          entity_id: alarm_control_panel.home_monitoring
        - service: notify.galaxy_cloud_speak
          data:
            message: "좋은 아침입니다."
        # pause the alarm music from speaker
        - condition: state
          entity_id: media_player.anbang_seupikeo
          state: "playing"
        - service: media_player.media_pause
          target:
            entity_id: media_player.anbang_seupikeo

    - id: "night_scene_switch_on"
      alias: "night scene - switch on"
      trigger:
        - platform: state
          entity_id: switch.hej_3gang_bedroom_bed_light_bottom
          from: "off"
          to: "on"
      action:
        - service: scene.turn_on
          entity_id: scene.night
        - service: alarm_control_panel.alarm_arm_night
          entity_id: alarm_control_panel.home_monitoring
        - service: notify.galaxy_cloud_speak
          data:
            message: "좋은 밤 되세요."

    # issue found: spotcast is not working
    # https://github.com/fondberg/spotcast/issues/241
    - id: "good_morning_songs"
      alias: "good morning songs"
      initial_state: true
      trigger:
        - platform: time
          at: "06:00:00"
      condition:
        - condition: state
          entity_id: input_boolean.trigger_first_morning
          state: "on"
      action:
        - service: spotcast.start
          data:
            uri: "spotify:playlist:{{ states('input_text.morning_spotify_playlist_id') }}"
            random_song: true
            shuffle: true
            start_volume: 40
            entity_id: media_player.anbang_seupikeo

    - id: "good_morning_songs_ytube_music_player"
      alias: "good morning songs from ytube_music_player"
      initial_state: false
      trigger:
        - platform: time
          at: "06:00:00"
      condition:
        - condition: state
          entity_id: input_boolean.trigger_first_morning
          state: "on"
      action:
        - service: media_player.select_source
          data:
            source: anbang_seupikeo
            entity_id: media_player.ytube_music_player
        - service: media_player.volume_set
          data:
            volume_level: 0.3
            entity_id: media_player.ytube_music_player
        - service: media_player.shuffle_set
          data:
            shuffle: true
            entity_id: media_player.ytube_music_player
        - service: media_player.play_media
          data:
            entity_id: media_player.ytube_music_player
            media_content_id: input_text.morning_ytube_music_playlist_id
            media_content_type: playlist
